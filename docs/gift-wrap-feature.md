# Nostr 日记加密分享

本应用支持使用 Nostr 协议的 NIP-59（Gift Wrap）标准对您的日记条目进行加密分享。这使您可以安全地与朋友私密地分享特定的日记条目，同时确保只有指定的接收方可以阅读内容。

## 加密分享功能

加密分享功能使用了 Nostr 的以下标准：

- **NIP-59 Gift Wrap**: 将日记内容封装在一个加密的"礼品包装"中
- **NIP-44 加密**: 提供端到端的安全加密

## 如何使用加密分享

1. 在查看已完成的日记条目时，点击"加密分享日记"按钮
2. 输入接收方的 Nostr 公钥（十六进制格式）
3. 点击"创建 Gift Wrap"按钮
4. 选择一个 Nostr 中继服务器 URL（默认为 `wss://relay.damus.io/`）
5. 点击"分享到中继"按钮

## 实现细节

加密分享功能在后端使用 nostr-sdk Rust 库实现，分享过程包含以下步骤：

1. 将您的日记条目转换为未签名的 Nostr 事件（称为"rumor"）
2. 使用您的私钥对其进行加密并签名（称为"seal"）
3. 将已加密和签名的内容包装在一个随机账户签名的 gift wrap 事件中
4. 将 gift wrap 事件发送到指定的 Nostr 中继服务器

接收方可以使用兼容 NIP-59 的 Nostr 客户端打开您的加密日记。
